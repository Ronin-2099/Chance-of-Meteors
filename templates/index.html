<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chance of Meteors</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"/>

<style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #1a1a2e;
        color: #e0e0e0;
      }
      .asteroid-form, .asteroid-info {
        width: 90%;
        max-width: 1000px;
        margin: 20px auto;
        padding: 20px;
        background-color: #2a2a4a;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }
      .navigation-links {
        text-align: center;
        margin-bottom: 20px;
        font-size: 1.2em;
      }
      .navigation-links a {
        color: #00aaff;
        text-decoration: none;
        margin: 0 15px;
        transition: color 0.3s;
      }
      .navigation-links a:hover {
        color: #007bff;
      }
      .form-row {
        margin-bottom: 15px;
      }
      button {
        padding: 8px 15px;
        border: none;
        background-color: #007bff;
        color: white;
        border-radius: 4px;
        cursor: pointer;
      }
      button:hover {
        background-color: #0056b3;
      }
      .error-message {
        color: #ff4d4d;
        text-align: center;
        font-weight: bold;
      }
      .action-buttons {
          display: flex;
          justify-content: center;
          gap: 20px;
          margin-top: 20px;
          flex-wrap: wrap;
      }
      .action-buttons a {
          background-color: #00aaff;
          color: white;
          padding: 12px 20px;
          border-radius: 5px;
          text-decoration: none;
          font-weight: bold;
          font-size: 1.1em;
          transition: background-color 0.3s;
      }
      .action-buttons a:hover {
          background-color: #007bff;
      }
</style>
</head>
<body>
<h1>Asteroid Explorer üî≠</h1>

<div class="navigation-links">
    <a href="{{ url_for('list_asteroids') }}">Whole list of registered asteroids</a>
</div>

<form method="get" class="asteroid-form">
    <div class="form-row">
        <label for="asteroid_id">Asteroid's ID:</label>
        <input type="text" id="asteroid_id" name="asteroid_id" required value="{{ request.args.get('asteroid_id','') }}">
    </div>
    <button type="submit">Load Data</button>
</form>

{% if error %}<p class="error-message">{{ error }}</p>{% endif %}

{% if asteroid_data %}
<div class="asteroid-info">
    <h2>{{ asteroid_data.name }} (ID: {{ asteroid_data.id }})</h2>
    
    {% if asteroid_data.is_potentially_hazardous_asteroid %}
      <p style="color: #ffc107; text-align: center; font-weight: bold;">‚ö†Ô∏è This asteroid is potentially dangerous! ‚ö†Ô∏è</p>
    {% endif %}

    <h4>Parameters for Orbit Calculation ü™ê</h4>
    <ul>
        <li><b>Semi-Major Axis (a):</b> {{ asteroid_data.semi_major_axis }} AU (defines orbit size)</li>
        <li><b>Eccentricity (e):</b> {{ asteroid_data.eccentricity }} (defines orbit shape)</li>
        <li><b>Inclination (i):</b> {{ asteroid_data.inclination }}¬∞ (defines orbit tilt)</li>
        <li><b>Ascending Node Longitude (Œ©):</b> {{ asteroid_data.ascending_node_longitude }}¬∞ (defines orbit orientation)</li>
        <li><b>Argument of Perihelion (œâ):</b> {{ asteroid_data.perihelion_argument }}¬∞ (defines ellipse rotation)</li>
        <li><b>Mean Anomaly (M):</b> {{ asteroid_data.mean_anomaly }}¬∞ (defines position at a specific time)</li>
        <hr style="border-color: #4a4a6a; margin: 10px 0;">
        <li><b>Orbital Period:</b> {{ asteroid_data.orbital_period }} days (time to orbit the Sun)</li>
        <li><b>Perihelion:</b> {{ asteroid_data.perihelion_distance }} AU (closest to Sun)</li>
        <li><b>Aphelion:</b> {{ asteroid_data.aphelion_distance }} AU (farthest from Sun)</li>
    </ul>
    <hr>
    <h4>Parameters for Impact and Consequences ‚òÑÔ∏è</h4>
    <ul>
        <li><b>Estimated Diameter:</b> between {{ asteroid_data.diameter_meters.min }} and {{ asteroid_data.diameter_meters.max }} meters</li>
        <li><b>Date of Next Approach:</b> {{ asteroid_data.close_approach.date }}</li>
        <li><b>Relative Approach Velocity:</b> {{ asteroid_data.close_approach.velocity_kps }} km/s</li>
        <li><b>Miss Distance (minimum):</b> {{ "%.2f"|format(asteroid_data.close_approach.miss_distance_km) }} km</li>
    </ul>
    <hr>
    
    <div class="action-buttons">
        <a href="{{ url_for('mapa', 
                      diameter=(asteroid_data.diameter_meters.min + asteroid_data.diameter_meters.max) / 2, 
                      velocity=asteroid_data.close_approach.velocity_kps * 1000) }}">
            Simulate Impact ‚òÑÔ∏è
        </a>
        
        <a href="{{ url_for('sim', 
                      name=asteroid_data.name,
                      sma=asteroid_data.semi_major_axis,
                      ecc=asteroid_data.eccentricity,
                      inc=asteroid_data.inclination,
                      raan=asteroid_data.ascending_node_longitude,
                      omega=asteroid_data.perihelion_argument,
                      m=asteroid_data.mean_anomaly,
                      hazardous=asteroid_data.is_potentially_hazardous_asteroid) }}">
            Visualize Orbit ü™ê
        </a>
    </div>
    </div>
{% endif %}

</body>
</html>